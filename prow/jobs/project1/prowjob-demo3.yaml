branch_spec: &branch_spec
  - ^master$
presubmits:
  awsgcr/aws-infra:
    - name: presubmit-public-docker-base
      run_if_changed: '^app/gitops-prow-demo/main.go$'
      agent: kubernetes
      always_run: false
      spec:
        containers:
        - command:
          - echo
          - "Use public.ecr.aws/aws-cli/aws-cli base image"
          env:
          - name: AWS_REGION
            value: ap-northeast-1
          image: public.ecr.aws/aws-cli/aws-cli
          imagePullPolicy: Always

presubmits:
  awsgcr/aws-infra:
    - name: presubmit-internal-docker-base
      run_if_changed: '^app/gitops-prow-demo/main.go$'
      agent: kubernetes
      always_run: false
      spec:
        containers:
        - command:
          - echo
          - "Use public.ecr.aws/aws-cli/aws-cli base image"
          env:
          - name: AWS_REGION
            value: ap-northeast-1
          image: 821278736125.dkr.ecr.ap-northeast-1.amazonaws.com/aws-infra/prow-ci:20240117
          imagePullPolicy: Always
